<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 35 pivoting | DoSS Toolkit</title>
<meta name="author" content="Various authors">
<meta name="description" content="Written by Annie Collins.  35.1 Introduction In this lesson, you will learn how to: Use the function pivot_wider() to manipulate a data frame or tibble. Use the function pivot_longer() to...">
<meta name="generator" content="bookdown 0.22.17 with bs4_book()">
<meta property="og:title" content="Chapter 35 pivoting | DoSS Toolkit">
<meta property="og:type" content="book">
<meta property="og:description" content="Written by Annie Collins.  35.1 Introduction In this lesson, you will learn how to: Use the function pivot_wider() to manipulate a data frame or tibble. Use the function pivot_longer() to...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 35 pivoting | DoSS Toolkit">
<meta name="twitter:description" content="Written by Annie Collins.  35.1 Introduction In this lesson, you will learn how to: Use the function pivot_wider() to manipulate a data frame or tibble. Use the function pivot_longer() to...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">DoSS Toolkit</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> About</a></li>
<li class="book-part">Hello World!</li>
<li><a class="" href="introduction.html"><span class="header-section-number">2</span> Introduction</a></li>
<li><a class="" href="getting-and-setting-up-rstudio.html"><span class="header-section-number">3</span> Getting and setting up RStudio</a></li>
<li><a class="" href="getting-to-know-what-is-what.html"><span class="header-section-number">4</span> Getting to know what is what</a></li>
<li><a class="" href="hello-world.html"><span class="header-section-number">5</span> Hello World!</a></li>
<li><a class="" href="hello-world-again.html"><span class="header-section-number">6</span> Hello World, again!</a></li>
<li><a class="" href="hello-world-again-1.html"><span class="header-section-number">7</span> Hello World, again!</a></li>
<li><a class="" href="the-r-community.html"><span class="header-section-number">8</span> The R community</a></li>
<li class="book-part">Operating in an error prone world</li>
<li><a class="" href="introduction-7.html"><span class="header-section-number">9</span> Introduction</a></li>
<li><a class="" href="getting-help-is-normal-learning-to-learn-r.html"><span class="header-section-number">10</span> Getting help is normal! – Learning to learn R</a></li>
<li><a class="" href="using-google-and-stack-overflow.html"><span class="header-section-number">11</span> Using Google and Stack Overflow</a></li>
<li><a class="" href="stack-overflow.html"><span class="header-section-number">12</span> Stack Overflow</a></li>
<li><a class="" href="when-your-code-doesnt-work.html"><span class="header-section-number">13</span> When your code doesn’t work</a></li>
<li><a class="" href="making-reproducible-examples.html"><span class="header-section-number">14</span> Making Reproducible Examples</a></li>
<li><a class="" href="how-to-make-the-most-of-rs-cryptic-error-messages.html"><span class="header-section-number">15</span> How to make the most of R’s cryptic error messages</a></li>
<li class="book-part">Holding the chaos at bay</li>
<li><a class="" href="introduction-13.html"><span class="header-section-number">16</span> Introduction</a></li>
<li><a class="" href="r-projects-and-working-directory.html"><span class="header-section-number">17</span> R Projects and working directory</a></li>
<li><a class="" href="folder-set-up.html"><span class="header-section-number">18</span> Folder set-up</a></li>
<li><a class="" href="writing-comments.html"><span class="header-section-number">19</span> Writing comments</a></li>
<li><a class="" href="installing-packages.html"><span class="header-section-number">20</span> Installing packages</a></li>
<li><a class="" href="install-from-github.html"><span class="header-section-number">21</span> Install from GitHub</a></li>
<li><a class="" href="calling-packages.html"><span class="header-section-number">22</span> Calling packages</a></li>
<li><a class="" href="updating-packages.html"><span class="header-section-number">23</span> Updating packages</a></li>
<li><a class="" href="read-csvs.html"><span class="header-section-number">24</span> Read CSVs</a></li>
<li><a class="" href="reading-tables-dta-and-other-data-types.html"><span class="header-section-number">25</span> Reading tables dta and other data types</a></li>
<li class="book-part">Hand me my plyrs</li>
<li><a class="" href="introduction-23.html"><span class="header-section-number">26</span> Introduction</a></li>
<li><a class="" href="what-is-the-tidyverse.html"><span class="header-section-number">27</span> What is the tidyverse?</a></li>
<li><a class="" href="the-pipe.html"><span class="header-section-number">28</span> The pipe</a></li>
<li><a class="" href="select.html"><span class="header-section-number">29</span> select</a></li>
<li><a class="" href="filter.html"><span class="header-section-number">30</span> filter</a></li>
<li><a class="" href="group-and-ungroup.html"><span class="header-section-number">31</span> group and ungroup</a></li>
<li><a class="" href="summarise.html"><span class="header-section-number">32</span> summarise</a></li>
<li><a class="" href="arrange.html"><span class="header-section-number">33</span> arrange</a></li>
<li><a class="" href="mutate.html"><span class="header-section-number">34</span> mutate</a></li>
<li><a class="active" href="pivoting.html"><span class="header-section-number">35</span> pivoting</a></li>
<li><a class="" href="rename.html"><span class="header-section-number">36</span> rename</a></li>
<li><a class="" href="counting.html"><span class="header-section-number">37</span> counting</a></li>
<li><a class="" href="slice.html"><span class="header-section-number">38</span> slice</a></li>
<li><a class="" href="data-2.html"><span class="header-section-number">39</span> data</a></li>
<li><a class="" href="length-rows-columns-and-dimensions.html"><span class="header-section-number">40</span> length, rows, columns and dimensions</a></li>
<li class="book-part">Totally addicted to base</li>
<li><a class="" href="introduction-37.html"><span class="header-section-number">41</span> Introduction</a></li>
<li><a class="" href="mean-median-sd-lm-and-summary.html"><span class="header-section-number">42</span> mean, median, sd, lm, and summary</a></li>
<li><a class="" href="function.html"><span class="header-section-number">43</span> function</a></li>
<li><a class="" href="for-and-while.html"><span class="header-section-number">44</span> for and while</a></li>
<li><a class="" href="if-if-else-and-case-when.html"><span class="header-section-number">45</span> if, if else and case when</a></li>
<li><a class="" href="c-seq-seq-along-and-rep.html"><span class="header-section-number">46</span> c, seq, seq along, and rep</a></li>
<li><a class="" href="hist-plot-and-boxplot.html"><span class="header-section-number">47</span> hist, plot and boxplot</a></li>
<li class="book-part">He was a d8er boi</li>
<li><a class="" href="introduction-44.html"><span class="header-section-number">48</span> Introduction</a></li>
<li class="book-part">To ggplot or not to ggplot</li>
<li><a class="" href="introduction-45.html"><span class="header-section-number">49</span> Introduction</a></li>
<li><a class="" href="head-tail-glimpse-and-summary.html"><span class="header-section-number">50</span> head, tail, glimpse and summary</a></li>
<li><a class="" href="overview-of-ggplot2.html"><span class="header-section-number">51</span> Overview of ggplot2</a></li>
<li><a class="" href="paste-paste0-glue-and-stringr.html"><span class="header-section-number">52</span> paste, paste0, glue and stringr</a></li>
<li><a class="" href="bar-charts.html"><span class="header-section-number">53</span> Bar charts</a></li>
<li><a class="" href="names-rbind-and-cbind.html"><span class="header-section-number">54</span> names, rbind and cbind</a></li>
<li><a class="" href="histograms.html"><span class="header-section-number">55</span> Histograms</a></li>
<li><a class="" href="joins.html"><span class="header-section-number">56</span> Joins</a></li>
<li><a class="" href="scatter-plots.html"><span class="header-section-number">57</span> Scatter plots</a></li>
<li><a class="" href="looking-for-missing-data.html"><span class="header-section-number">58</span> Looking for missing data</a></li>
<li><a class="" href="various-useful-options.html"><span class="header-section-number">59</span> Various useful options</a></li>
<li><a class="" href="setseed-runif-rnorm-and-sample.html"><span class="header-section-number">60</span> setseed, runif, rnorm, and sample</a></li>
<li><a class="" href="saving-graphs.html"><span class="header-section-number">61</span> Saving graphs</a></li>
<li><a class="" href="simulating-datasets-for-regression.html"><span class="header-section-number">62</span> Simulating datasets for regression</a></li>
<li><a class="" href="conditional-mutating-and-summarising.html"><span class="header-section-number">63</span> Conditional mutating and summarising</a></li>
<li><a class="" href="tidying-up-datasets.html"><span class="header-section-number">64</span> Tidying up datasets</a></li>
<li><a class="" href="pull-pluck-and-unnest.html"><span class="header-section-number">65</span> pull, pluck and unnest</a></li>
<li><a class="" href="forcats-and-factors.html"><span class="header-section-number">66</span> forcats and factors</a></li>
<li><a class="" href="more-on-strings.html"><span class="header-section-number">67</span> More on strings</a></li>
<li><a class="" href="regular-expressions.html"><span class="header-section-number">68</span> Regular expressions</a></li>
<li><a class="" href="working-with-dates.html"><span class="header-section-number">69</span> Working with dates</a></li>
<li><a class="" href="janitor.html"><span class="header-section-number">70</span> janitor</a></li>
<li><a class="" href="tidyr-package.html"><span class="header-section-number">71</span> tidyr package</a></li>
<li class="book-part">R Marky Markdown and the Funky Docs</li>
<li><a class="" href="introduction-66.html"><span class="header-section-number">72</span> Introduction</a></li>
<li><a class="" href="introduction-to-r-markdown.html"><span class="header-section-number">73</span> Introduction to R Markdown</a></li>
<li><a class="" href="top-matter-title-date-author-abstract.html"><span class="header-section-number">74</span> Top Matter: Title, Date, Author, Abstract</a></li>
<li><a class="" href="tables-kable-kableextra-and-gt.html"><span class="header-section-number">75</span> Tables: kable, kableextra, and gt</a></li>
<li><a class="" href="multiple-plots-with-patchwork.html"><span class="header-section-number">76</span> Multiple plots with patchwork</a></li>
<li><a class="" href="references-and-bibtex.html"><span class="header-section-number">77</span> References and Bibtex</a></li>
<li><a class="" href="pdf-outputs.html"><span class="header-section-number">78</span> PDF outputs</a></li>
<li><a class="" href="here-and-filepaths.html"><span class="header-section-number">79</span> here and filepaths</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="pivoting" class="section level1" number="35">
<h1>
<span class="header-section-number">35</span> pivoting<a class="anchor" aria-label="anchor" href="#pivoting"><i class="fas fa-link"></i></a>
</h1>
<p>Written by Annie Collins.</p>
<div id="introduction-31" class="section level2" number="35.1">
<h2>
<span class="header-section-number">35.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-31"><i class="fas fa-link"></i></a>
</h2>
<p>In this lesson, you will learn how to:</p>
<ul>
<li>Use the function <code>pivot_wider()</code> to manipulate a data frame or tibble.</li>
<li>Use the function <code>pivot_longer()</code> to manipulate a data frame or tibble.</li>
</ul>
<p>This lesson is a yellow level skill and is part of “Tidyverse Essentials.” Prerequisite skills include:</p>
<ul>
<li>Installing packages</li>
<li>Calling libraries</li>
<li>Importing data</li>
</ul>
</div>
<div id="pivot_longer" class="section level2" number="35.2">
<h2>
<span class="header-section-number">35.2</span> pivot_longer()<a class="anchor" aria-label="anchor" href="#pivot_longer"><i class="fas fa-link"></i></a>
</h2>
<p><code>pivot_longer()</code> takes the inputted dataset and makes it <strong>longer</strong> by rearranging its data to <strong>increase the number of rows</strong> and <strong>decrease the number of columns</strong>. Here, we consider “longer” in the vertical sense – a “longer” dataset has a larger number of cells from top to bottom than a “shorter” dataset.</p>
<div id="introductory-example" class="section level3" number="35.2.1">
<h3>
<span class="header-section-number">35.2.1</span> Introductory Example<a class="anchor" aria-label="anchor" href="#introductory-example"><i class="fas fa-link"></i></a>
</h3>
<p>This dataset (called <code>games</code>) contains a list of NBA teams and their win/loss record over the course of 10 games.</p>
<pre><code>#&gt;                   teams gm1 gm2 gm3 gm4 gm5
#&gt; 1       Toronto Raptors   l   l   w   w   w
#&gt; 2    Los Angeles Lakers   l   w   w   l   w
#&gt; 3        Boston Celtics   w   l   l   l   w
#&gt; 4 Golden State Warriors   l   w   l   l   w
#&gt; 5            Miami Heat   l   l   w   w   l</code></pre>
<p>Run the code below and observe the effect it has on the dataset. Take note of the difference in the number of rows and columns between the two tables. This will be visualized and explained in greater detail in the following step.</p>
<pre><code>#&gt; # A tibble: 25 × 3
#&gt;    teams              `game number` status
#&gt;    &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt; 
#&gt;  1 Toronto Raptors    gm1           l     
#&gt;  2 Toronto Raptors    gm2           l     
#&gt;  3 Toronto Raptors    gm3           w     
#&gt;  4 Toronto Raptors    gm4           w     
#&gt;  5 Toronto Raptors    gm5           w     
#&gt;  6 Los Angeles Lakers gm1           l     
#&gt;  7 Los Angeles Lakers gm2           w     
#&gt;  8 Los Angeles Lakers gm3           w     
#&gt;  9 Los Angeles Lakers gm4           l     
#&gt; 10 Los Angeles Lakers gm5           w     
#&gt; # … with 15 more rows</code></pre>
</div>
</div>
<div id="visualizing-pivot_longer" class="section level2" number="35.3">
<h2>
<span class="header-section-number">35.3</span> Visualizing pivot_longer()<a class="anchor" aria-label="anchor" href="#visualizing-pivot_longer"><i class="fas fa-link"></i></a>
</h2>
<p>This video will guide you through the changes that occur when applying <code>pivot_longer()</code> to our dataset.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/OBsQA0vyxNA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="pivot_longer-arguments" class="section level2" number="35.4">
<h2>
<span class="header-section-number">35.4</span> pivot_longer() Arguments<a class="anchor" aria-label="anchor" href="#pivot_longer-arguments"><i class="fas fa-link"></i></a>
</h2>
<p>Now let’s get a bit more specific.</p>
<p>You just executed the command <code>pivot_longer(data = games, cols = c(gm1, gm2, gm3, gm4, gm5), names_to = "game number", values_to = "status")</code>. What do each of the arguments within the brackets mean?</p>
<ul>
<li><p><strong>data</strong>: the name of our dataframe, in this case <code>games</code>.</p></li>
<li><p><strong>cols</strong>: the names of the columns that will be “pivoting” or changing into a longer format. <em>In our example, we select all columns representing a single game, which are columns “gm1” through “gm5.” We could have also written <code>!teams</code> (all columns except “teams”) or <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with("gm")</a></code> (all the columns with a name that starts with “gm”)</em>.</p></li>
<li><p><strong>names_to</strong>: a new name for the column that will be created from the former column names in <strong>cols</strong>. After pivoting, the former distinct columns are now all stored within one column themselves, and this argument lets you give this adjusted column a descriptive new name. If left blank, the new column name will automatically be set to “names.” <em>In our example, we named the column “game number” since it contains “gm1” through “gm5”</em>.</p></li>
<li><p><strong>values_to</strong>: similar to <strong>names_to</strong>, this represents a new name for the column created for the data that was originally stored in each individual cell. If left blank, the new column name will automatically be set to “values.” <em>In our example, we set the name to “status” since the column contains information representing each team’s win or loss outcome for a given game</em>.</p></li>
</ul>
</div>
<div id="pivot_wider" class="section level2" number="35.5">
<h2>
<span class="header-section-number">35.5</span> pivot_wider()<a class="anchor" aria-label="anchor" href="#pivot_wider"><i class="fas fa-link"></i></a>
</h2>
<p><code>pivot_wider()</code> takes the inputted dataset and makes it <strong>wider</strong> by rearranging its data to <strong>decrease the number of rows</strong> and <strong>increase the number of columns</strong>. <code>pivot_wider()</code> is essentially the inverse of <code>pivot_longer()</code> - the two transformations can be used to switch a data frame back and forth between its “longer” and “wider” forms.</p>
<div id="introductory-example-1" class="section level3" number="35.5.1">
<h3>
<span class="header-section-number">35.5.1</span> Introductory Example<a class="anchor" aria-label="anchor" href="#introductory-example-1"><i class="fas fa-link"></i></a>
</h3>
<p>This is a dataset called <code>games_long</code>, a “longer” version of <code>games</code> (the result of applying <code>pivot_longer()</code> to the original data frame).</p>
<pre><code>#&gt; # A tibble: 25 × 3
#&gt;    teams              `game number` status
#&gt;    &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt; 
#&gt;  1 Toronto Raptors    gm1           l     
#&gt;  2 Toronto Raptors    gm2           l     
#&gt;  3 Toronto Raptors    gm3           w     
#&gt;  4 Toronto Raptors    gm4           w     
#&gt;  5 Toronto Raptors    gm5           w     
#&gt;  6 Los Angeles Lakers gm1           l     
#&gt;  7 Los Angeles Lakers gm2           w     
#&gt;  8 Los Angeles Lakers gm3           w     
#&gt;  9 Los Angeles Lakers gm4           l     
#&gt; 10 Los Angeles Lakers gm5           w     
#&gt; # … with 15 more rows</code></pre>
<p>Run the code below and observe the effect it has on the dataset. Take note of the difference in the number of rows and columns between the two tables.</p>
<pre><code>#&gt; # A tibble: 5 × 6
#&gt;   teams                 gm1   gm2   gm3   gm4   gm5  
#&gt;   &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
#&gt; 1 Toronto Raptors       l     l     w     w     w    
#&gt; 2 Los Angeles Lakers    l     w     w     l     w    
#&gt; 3 Boston Celtics        w     l     l     l     w    
#&gt; 4 Golden State Warriors l     w     l     l     w    
#&gt; 5 Miami Heat            l     l     w     w     l</code></pre>
</div>
</div>
<div id="visualizing-pivot_wider" class="section level2" number="35.6">
<h2>
<span class="header-section-number">35.6</span> Visualizing pivot_wider()<a class="anchor" aria-label="anchor" href="#visualizing-pivot_wider"><i class="fas fa-link"></i></a>
</h2>
<p>This video will guide you through the changes that occur when applying <code>pivot_wider()</code> to our data frame.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/PycHf7Og-sY" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="pivot_wider-arguments" class="section level2" number="35.7">
<h2>
<span class="header-section-number">35.7</span> pivot_wider() Arguments<a class="anchor" aria-label="anchor" href="#pivot_wider-arguments"><i class="fas fa-link"></i></a>
</h2>
<p>You just executed the command <code>pivot_wider(data = games, names_from = "game number", values_from = status)</code>. What do each of the arguments within the brackets mean?</p>
<ul>
<li><p><strong>data</strong>: the name of our dataframe, in this case <code>games</code>.</p></li>
<li><p><strong>names_from</strong>: the column containing the names which will be given to the new columns once the data frame is pivoted. <em>In our example, we use “game number” since we want each column to contain information for a specific game</em>.</p></li>
<li><p><strong>values_from</strong>: the name (or names, in a vector) of the column containing values that will be stored at the cell level within each new column once the data frame is pivoted. <em>In our example, we use “status” since we want each team’s win or loss results recorded in the appropriate game’s column and the appropriate team’s row</em>.</p></li>
</ul>
</div>
<div id="other-optional-arguments-1" class="section level2" number="35.8">
<h2>
<span class="header-section-number">35.8</span> Other Optional Arguments<a class="anchor" aria-label="anchor" href="#other-optional-arguments-1"><i class="fas fa-link"></i></a>
</h2>
<div id="pivot_longer-1" class="section level3" number="35.8.1">
<h3>
<span class="header-section-number">35.8.1</span> pivot_longer()<a class="anchor" aria-label="anchor" href="#pivot_longer-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<strong>names_prefix = “…”</strong>: Removes a the stated common prefix from the beginning of each pivoted column name.</li>
<li>
<strong>values_drop_na = TRUE</strong>: If TRUE, this will remove rows containing only missing (NA) values in the <strong>values_to</strong> column.</li>
</ul>
</div>
<div id="pivot_wider-1" class="section level3" number="35.8.2">
<h3>
<span class="header-section-number">35.8.2</span> pivot_wider()<a class="anchor" aria-label="anchor" href="#pivot_wider-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p><strong>names_prefix = “…”</strong>: Adds the stated string to the beginning of each new column name from <code>names from</code> argument. This may be useful if the data contained in <code>names_from</code> is numeric and you wish to add a descriptive prefix.</p></li>
<li><p><strong>values_fill = “…”</strong>: replaces any missing or NA values in <code>values_from</code> with the inputted string or value.</p></li>
<li><p><strong>names_sort = TRUE</strong>: sorts the columns by name instead of in order of appearance.</p></li>
<li><p><strong>names_sep = “…”</strong>: if <code>names_from</code> or <code>values_from</code> contains multiple variables (in the form of a vector), <code>names_sep</code> allows you to state a specific string that will be used to join their names together into a single string as a column name (for example, “.” or "_").</p></li>
</ul>
</div>
</div>
<div id="questions-2" class="section level2" number="35.9">
<h2>
<span class="header-section-number">35.9</span> Questions<a class="anchor" aria-label="anchor" href="#questions-2"><i class="fas fa-link"></i></a>
</h2>
<p>Please reference this dataframe representing different pizza topping combinations for the following three questions:</p>
<pre><code>#&gt;       type      top1      top2
#&gt; 1  classic    cheese pepperoni
#&gt; 2 hawaiian       ham pineapple
#&gt; 3   veggie mushrooms   peppers</code></pre>
<!-- ```{r longerq1, echo=FALSE} -->
<!-- question("If `pivot_longer()` was applied to this dataframe on columns 'top1' and 'top2', how many rows would the output have (not including the header)?", -->
<!-- answer("2"), -->
<!-- answer("3"), -->
<!-- answer("6", correct=TRUE), -->
<!-- answer("9") -->
<!-- ) -->
<!-- ``` -->
<!-- ```{r longerq2, echo=FALSE} -->
<!-- question("If `pivot_longer()` was applied to this dataframe on columns 'top1' and 'top2', how many times would the word 'pineapple' appear in the outputted dataframe?", -->
<!-- answer("1", correct=TRUE), -->
<!-- answer("2"), -->
<!-- answer("3"), -->
<!-- answer("0") -->
<!-- ) -->
<!-- ``` -->
<!-- ```{r longerq3, echo=FALSE} -->
<!-- question("If `pivot_longer()` was applied to this dataframe on columns 'top1' and 'top2', what would the fourth row (not including header) of the outputted dataframe contain?", -->
<!-- answer("veggie, top1, mushrooms"), -->
<!-- answer("veggie, top2, peppers"), -->
<!-- answer("hawaiian, top1, ham"), -->
<!-- answer("hawaiian, top2, pineapple", correct = TRUE) -->
<!-- ) -->
<!-- ``` -->
<!-- Please reference this dataframe representing different pizza topping combinations for the following three questions: -->
<!-- ```{r questionframe2, echo=FALSE} -->
<!-- pivot_longer(pizza, cols=starts_with("top"), names_to = "number", values_to = "topping") -->
<!-- ``` -->
<!-- ```{r widerq1, echo=FALSE} -->
<!-- question("If `pivot_wider()` was applied to this dataframe with names from \"number\" and values from \"topping\", how many columns would the output have?", -->
<!-- answer("2"), -->
<!-- answer("3", correct=TRUE), -->
<!-- answer("6"), -->
<!-- answer("9") -->
<!-- ) -->
<!-- ``` -->
<!-- ```{r widerq2, echo=FALSE} -->
<!-- question("If `pivot_wider()` was applied to this dataframe with names from \"number\" and values from \"topping\", how many times would the type \"classic\" appear in the output?", -->
<!-- answer("1", correct = TRUE), -->
<!-- answer("2"), -->
<!-- answer("3"), -->
<!-- answer("0") -->
<!-- ) -->
<!-- ``` -->
<!-- ```{r widerq3, echo=FALSE} -->
<!-- question("If `pivot_wider()` was applied to this dataframe with names from \"number\" and values from \"topping\", what would the column names be?", -->
<!-- answer("type, top1, top2", correct = TRUE), -->
<!-- answer("classic, hawaiian, veggie"), -->
<!-- answer("type, number, topping"), -->
<!-- answer("classic, cheese, pepperoni") -->
<!-- ) -->
<!-- ``` -->
</div>
<div id="exercises-15" class="section level2" number="35.10">
<h2>
<span class="header-section-number">35.10</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-15"><i class="fas fa-link"></i></a>
</h2>
<div id="pivot_longer-2" class="section level3" number="35.10.1">
<h3>
<span class="header-section-number">35.10.1</span> pivot_longer()<a class="anchor" aria-label="anchor" href="#pivot_longer-2"><i class="fas fa-link"></i></a>
</h3>
<p>Original <code>games</code> data, for reference.</p>
<pre><code>#&gt;                   teams gm1 gm2 gm3 gm4 gm5
#&gt; 1       Toronto Raptors   l   l   w   w   w
#&gt; 2    Los Angeles Lakers   l   w   w   l   w
#&gt; 3        Boston Celtics   w   l   l   l   w
#&gt; 4 Golden State Warriors   l   w   l   l   w
#&gt; 5            Miami Heat   l   l   w   w   l</code></pre>
<p><strong>Hint</strong>: Unless specified, there are multiple ways to select the columns you wish to pivot.</p>
<ol style="list-style-type: decimal">
<li>Pivot the data stored in all columns except “teams.” Map column names to a new column called “top five” and data from pivoted columns to a new column called “outcome.”</li>
</ol>
<!-- ```{r longerexample1, exercise=TRUE} --><!-- ``` --><!-- ```{r longerexample1-solution} --><!-- pivot_longer(games, cols = !teams, names_to = "top five", values_to = "outcome") --><!-- ``` --><ol start="2" style="list-style-type: decimal">
<li>The code in the window below replaces all “l” values in “games” with NA. Run this code, then pivot this table to make it longer while removing all rows with NA values. Assign columns their default names.</li>
</ol>
<!-- ```{r longerexample2, exercise=TRUE} --><!-- games[games=="l"] <- NA --><!-- games --><!-- ``` --><!-- ```{r longerexample2-solution} --><!-- pivot_longer(data = games, cols = c(gm1, gm2, gm3, gm4, gm5), values_drop_na = TRUE) --><!-- ``` -->
</div>
<div id="pivot_wider-2" class="section level3" number="35.10.2">
<h3>
<span class="header-section-number">35.10.2</span> pivot_wider()<a class="anchor" aria-label="anchor" href="#pivot_wider-2"><i class="fas fa-link"></i></a>
</h3>
<p>Original <code>games_long</code> data, for reference.</p>
<pre><code>#&gt; # A tibble: 25 × 3
#&gt;    teams              `game number` status
#&gt;    &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt; 
#&gt;  1 Toronto Raptors    gm1           l     
#&gt;  2 Toronto Raptors    gm2           l     
#&gt;  3 Toronto Raptors    gm3           w     
#&gt;  4 Toronto Raptors    gm4           w     
#&gt;  5 Toronto Raptors    gm5           w     
#&gt;  6 Los Angeles Lakers gm1           l     
#&gt;  7 Los Angeles Lakers gm2           w     
#&gt;  8 Los Angeles Lakers gm3           w     
#&gt;  9 Los Angeles Lakers gm4           l     
#&gt; 10 Los Angeles Lakers gm5           w     
#&gt; # … with 15 more rows</code></pre>
<ol style="list-style-type: decimal">
<li>Manipulate <code>games_long</code> to look like the original <code>games</code> data frame at the top of this page.</li>
</ol>
<!-- ```{r widerexample1, exercise=TRUE} --><!-- ``` --><!-- ```{r widerexample1-solution} --><!-- pivot_wider(data = games_long, names_from = "game number", values_from = "status") --><!-- ``` -->
</div>
</div>
<div id="common-mistakes-errors-10" class="section level2" number="35.11">
<h2>
<span class="header-section-number">35.11</span> Common Mistakes &amp; Errors<a class="anchor" aria-label="anchor" href="#common-mistakes-errors-10"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>If you want to keep your dataframe in its longer or wider version, make sure to assign or reassign it to a variable when you execute <code>pivot_longer()</code>. For example, if you wish “games” to now represent the longer version of games instead of the original, you must write <code>games &lt;- pivot_longer(data=games, ...)</code>
</li>
</ul>
<p><em>Error in UseMethod(“pivot_longer”) :
no applicable method for ‘pivot_longer’ applied to an object of class “c(‘matrix,’ ‘array,’ ‘character’)”</em></p>
<ul>
<li>pivot_longer() only works on <strong>dataframes</strong> (not lists, character vectors, etc.). If you are working with something that isn’t a dataframe, you can use the function <code><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame()</a></code> to turn your data from its original format into a dataframe.</li>
</ul>
</div>
<div id="next-steps-18" class="section level2" number="35.12">
<h2>
<span class="header-section-number">35.12</span> Next Steps<a class="anchor" aria-label="anchor" href="#next-steps-18"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Try more complicated pivots, like pivoting into multiple new columns at once or combining boolean statements.</li>
<li>Switch your dataframe between formats using <code>pivot_longer()</code> and <code>pivot_wider()</code> as inverse functions.</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="mutate.html"><span class="header-section-number">34</span> mutate</a></div>
<div class="next"><a href="rename.html"><span class="header-section-number">36</span> rename</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#pivoting"><span class="header-section-number">35</span> pivoting</a></li>
<li><a class="nav-link" href="#introduction-31"><span class="header-section-number">35.1</span> Introduction</a></li>
<li>
<a class="nav-link" href="#pivot_longer"><span class="header-section-number">35.2</span> pivot_longer()</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#introductory-example"><span class="header-section-number">35.2.1</span> Introductory Example</a></li></ul>
</li>
<li><a class="nav-link" href="#visualizing-pivot_longer"><span class="header-section-number">35.3</span> Visualizing pivot_longer()</a></li>
<li><a class="nav-link" href="#pivot_longer-arguments"><span class="header-section-number">35.4</span> pivot_longer() Arguments</a></li>
<li>
<a class="nav-link" href="#pivot_wider"><span class="header-section-number">35.5</span> pivot_wider()</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#introductory-example-1"><span class="header-section-number">35.5.1</span> Introductory Example</a></li></ul>
</li>
<li><a class="nav-link" href="#visualizing-pivot_wider"><span class="header-section-number">35.6</span> Visualizing pivot_wider()</a></li>
<li><a class="nav-link" href="#pivot_wider-arguments"><span class="header-section-number">35.7</span> pivot_wider() Arguments</a></li>
<li>
<a class="nav-link" href="#other-optional-arguments-1"><span class="header-section-number">35.8</span> Other Optional Arguments</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#pivot_longer-1"><span class="header-section-number">35.8.1</span> pivot_longer()</a></li>
<li><a class="nav-link" href="#pivot_wider-1"><span class="header-section-number">35.8.2</span> pivot_wider()</a></li>
</ul>
</li>
<li><a class="nav-link" href="#questions-2"><span class="header-section-number">35.9</span> Questions</a></li>
<li>
<a class="nav-link" href="#exercises-15"><span class="header-section-number">35.10</span> Exercises</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#pivot_longer-2"><span class="header-section-number">35.10.1</span> pivot_longer()</a></li>
<li><a class="nav-link" href="#pivot_wider-2"><span class="header-section-number">35.10.2</span> pivot_wider()</a></li>
</ul>
</li>
<li><a class="nav-link" href="#common-mistakes-errors-10"><span class="header-section-number">35.11</span> Common Mistakes &amp; Errors</a></li>
<li><a class="nav-link" href="#next-steps-18"><span class="header-section-number">35.12</span> Next Steps</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/039-hand_me_my_plyrs-pivotwider.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/039-hand_me_my_plyrs-pivotwider.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>DoSS Toolkit</strong>" was written by Various authors. It was last built on 2021-09-06.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
